services:
  backend:
    build:
      context: ./backend
    container_name: seriusbrand-backend-dev
    ports:
      - "8080:8081" # Map host 8080 to container 8081 (standardize on 8080)
    volumes:
      - ./backend/uploads:/app/uploads
    environment:
      - PORT=8081
      - DB_HOST=host.docker.internal # Connect to host DB
      # Or DB_HOST=postgres if using containerized DB
      - DB_USER=postgres
      - DB_PASSWORD=postgres
      - DB_NAME=seriusbrand_dev
      - DB_PORT=5432
    extra_hosts:
      - "host.docker.internal:host-gateway"
    restart: always

  frontend:
    build:
      context: ./frontend
    container_name: seriusbrand-frontend-dev
    ports:
      - "81:80" # Map host 81 to container 80
    depends_on:
      - backend
    restart: always
